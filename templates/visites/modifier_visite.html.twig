{% extends 'base.html.twig' %}

{% block title %}Modifier une visite{% endblock %}

{% block body %}
    <h1>Modifier une visite</h1>
    
    <form method="post" novalidate>
        <div class="form-group">
            <label for="user">Utilisateur</label>
            <select id="user" name="id_user" class="form-control" required>
                {% for user in users %}
                    <option value="{{ user.id }}" {% if user.id == visite.id_user.id %}selected{% endif %}>
                        {{ user.name }} {{ user.surname }} <!-- Affiche le prénom et le nom -->
                    </option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" id="date" name="date" class="form-control" 
                   value="{{ visite.date|date('Y-m-d') }}" required>
        </div>
        
        <div class="form-group">
            <label for="heure">Heure</label>
            <input type="time" id="heure" name="heure" class="form-control" 
                   value="{{ visite.heure }}" required>
        </div>
        
        <div class="form-group">
            <label for="motif">Motif</label>
            <input type="text" id="motif" name="motif" class="form-control" 
                   value="{{ visite.motif }}" required>
        </div>
        
        <div class="form-group">
            <label for="statut">Statut</label>
            <select id="statut" name="statut" class="form-control" required>
                <option value="En attente" {% if visite.statut == 'En attente' %}selected{% endif %}>En attente</option>
                <option value="Confirmée" {% if visite.statut == 'Confirmée' %}selected{% endif %}>Confirmée</option>
                <option value="Annulée" {% if visite.statut == 'Annulée' %}selected{% endif %}>Annulée</option>
                <option value="Terminée" {% if visite.statut == 'Terminée' %}selected{% endif %}>Terminée</option>
            </select>
        </div>
        
        <button type="submit" class="btn btn-primary">Enregistrer</button>
        <a href="{{ path('afficher_visite') }}" class="btn btn-secondary">Annuler</a>
    </form>
{% endblock %}

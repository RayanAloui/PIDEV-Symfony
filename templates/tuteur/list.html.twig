<style>
    body {
        font-family: 'Arial', sans-serif;
        background-color: #f5efe6; /* Beige clair */
        color: #5a3e36; /* Marron foncÃ© */
        margin: 0;
        padding: 0;
    }

    h1 {
        text-align: center;
        color: #4a2c2a;
        font-size: 32px;
    }

    .container {
        width: 90%;
        max-width: 1200px;
        margin: auto;
        padding: 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.1);
    }

    .btn {
        display: inline-block;
        padding: 10px 15px;
        border-radius: 5px;
        text-decoration: none;
        font-weight: bold;
        transition: 0.3s;
    }

    .btn-warning {
        background-color: #d4a373; /* Marron clair */
        color: white;
    }

    .btn-warning:hover {
        background-color: #b08968;
    }

    .btn-danger {
        background-color: #a23e48;
        color: white;
    }

    .btn-danger:hover {
        background-color: #822727;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
    }

    table th, table td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    table th {
        background-color: #8d6c5b; /* Marron doux */
        color: white;
    }

    table tr:nth-child(even) {
        background-color: #f5efe6;
    }

    table tr:hover {
        background-color: #e6d5c7;
        transition: 0.3s;
    }

    .actions {
        display: flex;
        gap: 10px;
    }

    .no-data {
        text-align: center;
        padding: 15px;
        color: #b08968;
    }

    /* Conteneur du formulaire */
.form-group {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 20px;
}

/* Champ de recherche */
input[type="search"] {
    flex-grow: 1;
    padding: 10px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 5px;
    transition: border 0.3s ease;
}

input[type="search"]:focus {
    border-color: #b08968;
    outline: none;
}

/* Bouton de recherche */
button {
    background-color: #b08968;
    color: white;
    border: none;
    padding: 10px 15px;
    font-size: 16px;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.3s ease;
}

button:hover {
    background-color: #b08968;
}

.search-bar {
    width: 100%;
    padding: 10px;
    font-size: 16px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

</style>


<body>
    <div class="container">
        <h1>Liste des Tuteurs</h1>
        <a href="{{ path('app_crud_tuteur_add') }}" class="btn btn-warning">Ajouter un Tuteur</a>
        
        <a href="{{ path('tuteurs_pdf') }}" class="btn btn-danger">ðŸ“„ Exporter en PDF</a>

        <p></p>

         {{ form_start(form) }}
            {{ form_widget(form.query) }}
        {{ form_end(form) }}

        
        <table>
            <thead>
            <tr>
            <th>
                <a href="{{ path('app_crud_tuteur', { sort: 'cinT', order: sortOrder == 'asc' ? 'desc' : 'asc' }) }}">
                    CIN {{ sortField == 'cinT' ? (sortOrder == 'asc' ? 'ðŸ”¼' : 'ðŸ”½') : '' }}
                </a>
            </th>
            <th>
                <a href="{{ path('app_crud_tuteur', { sort: 'nomT', order: sortOrder == 'asc' ? 'desc' : 'asc' }) }}">
                    Nom {{ sortField == 'nomT' ? (sortOrder == 'asc' ? 'ðŸ”¼' : 'ðŸ”½') : '' }}
                </a>
            </th>
            <th>
                <a href="{{ path('app_crud_tuteur', { sort: 'prenomT', order: sortOrder == 'asc' ? 'desc' : 'asc' }) }}">
                    PrÃ©nom {{ sortField == 'prenomT' ? (sortOrder == 'asc' ? 'ðŸ”¼' : 'ðŸ”½') : '' }}
                </a>
            </th>
            <th>
                <a href="{{ path('app_crud_tuteur', { sort: 'telephoneT', order: sortOrder == 'asc' ? 'desc' : 'asc' }) }}">
                    TÃ©lÃ©phone {{ sortField == 'telephoneT' ? (sortOrder == 'asc' ? 'ðŸ”¼' : 'ðŸ”½') : '' }}
                </a>
            </th>
            <th>
                <a href="{{ path('app_crud_tuteur', { sort: 'adresseT', order: sortOrder == 'asc' ? 'desc' : 'asc' }) }}">
                    Adresse {{ sortField == 'adresseT' ? (sortOrder == 'asc' ? 'ðŸ”¼' : 'ðŸ”½') : '' }}
                </a>
            </th>
            <th>
                <a href="{{ path('app_crud_tuteur', { sort: 'disponibilite', order: sortOrder == 'asc' ? 'desc' : 'asc' }) }}">
                    DisponibilitÃ© {{ sortField == 'disponibilite' ? (sortOrder == 'asc' ? 'ðŸ”¼' : 'ðŸ”½') : '' }}
                </a>
            </th>
            <th>
                <a href="{{ path('app_crud_tuteur', { sort: 'email', order: sortOrder == 'asc' ? 'desc' : 'asc' }) }}">
                    Email {{ sortField == 'email' ? (sortOrder == 'asc' ? 'ðŸ”¼' : 'ðŸ”½') : '' }}
                </a>
            </th>
            <th>Actions</th>
            </tr>
            </thead>
            <tbody id="tuteurs-list">
                {% for tuteur in tuteurs %}
                    <tr>
                        <td>{{ tuteur.cinT }}</td>
                        <td>{{ tuteur.nomT }}</td>
                        <td>{{ tuteur.prenomT }}</td>
                        <td>{{ tuteur.telephoneT }}</td>
                        <td>{{ tuteur.adresseT }}</td>
                        <td>{{ tuteur.disponibilite }}</td>
                        <td>{{ tuteur.email }}</td>
                        <td class="actions">
                            <a href="{{ path('app_crud_tuteur_edit', {'id': tuteur.idT}) }}" class="btn btn-warning">Modifier</a>
                            <a href="{{ path('app_crud_tuteur_delete', {'id': tuteur.idT}) }}" class="btn btn-danger" onclick="return confirm('Voulez-vous vraiment supprimer ce tuteur ?');">Supprimer</a>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="8" class="no-data">Aucun tuteur trouvÃ©.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

      <script>
        document.addEventListener("DOMContentLoaded", function () {
            const searchInput = document.querySelector(".search-input");
            const tuteursList = document.getElementById("tuteurs-list");

            searchInput.addEventListener("input", function () {
                let query = this.value.trim();

                if (query === '') {
        fetch('/tuteur/list') 
            .then(response => response.text())
            .then(html => {
                let parser = new DOMParser();
                let doc = parser.parseFromString(html, 'text/html');
                let tbody = doc.querySelector('#tuteursList'); 
                document.getElementById('tuteursList').innerHTML = tbody.innerHTML;
            });
        return;
    }

                fetch(`/tuteurs/search?query=${encodeURIComponent(query)}`)
                    .then(response => response.json())
                    .then(data => {
                        tuteursList.innerHTML = ""; // Effacer le tableau avant d'ajouter de nouveaux rÃ©sultats

                        if (data.tuteurs.length === 0) {
                            tuteursList.innerHTML = "<tr><td colspan='5'>Aucun tuteur trouvÃ©.</td></tr>";
                            return;
                        }

                        data.tuteurs.forEach(tuteur => {
                            let row = `<tr>
                                <td>${tuteur.cinT}</td>
                                <td>${tuteur.nomT}</td>
                                <td>${tuteur.prenomT}</td>
                                <td>${tuteur.telephoneT}</td>
                                <td>${tuteur.email}</td>
                            </tr>`;
                            tuteursList.innerHTML += row;
                        });
                    });
            });
        });
    </script>

</body>

